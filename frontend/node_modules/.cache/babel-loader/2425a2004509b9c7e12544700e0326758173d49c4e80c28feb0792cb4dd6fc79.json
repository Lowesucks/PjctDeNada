{"ast":null,"code":"// Configuraci贸n de API que detecta autom谩ticamente el entorno\nconst getApiBaseUrl = () => {\n  // Si estamos en el navegador\n  if (typeof window !== 'undefined') {\n    const hostname = window.location.hostname;\n    const protocol = window.location.protocol;\n    const port = '5000'; // Puerto del backend\n\n    // Si accedemos desde localhost, usar localhost para el backend\n    if (hostname === 'localhost' || hostname === '127.0.0.1') {\n      return `${protocol}//localhost:${port}`;\n    }\n\n    // Si accedemos desde IP local, usar la misma IP para el backend\n    if (hostname.match(/^192\\.168\\.|^10\\.|^172\\./)) {\n      return `${protocol}//${hostname}:${port}`;\n    }\n\n    // Fallback a localhost\n    return `${protocol}//localhost:${port}`;\n  }\n\n  // Fallback para desarrollo\n  return 'https://localhost:5000';\n};\n\n// Configuraci贸n de axios\nimport axios from 'axios';\n\n// Configurar la URL base de la API\naxios.defaults.baseURL = getApiBaseUrl();\n\n// Interceptor para manejar errores de conexi贸n\naxios.interceptors.request.use(config => {\n  // Log de la URL que se est谩 usando (solo en desarrollo)\n  if (process.env.NODE_ENV === 'development') {\n    var _config$method;\n    console.log(` API Request: ${(_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase()} ${config.baseURL}${config.url}`);\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Interceptor para manejar 401 (token inv谩lido o expirado)\naxios.interceptors.response.use(response => response, error => {\n  if (error.response && error.response.status === 401) {\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('userData');\n    delete axios.defaults.headers.common['Authorization'];\n    // Opcional: puedes mostrar un mensaje o redirigir al login\n    window.location.reload(); // Recarga la app para forzar login\n  }\n  return Promise.reject(error);\n});\nexport default axios;","map":{"version":3,"names":["getApiBaseUrl","window","hostname","location","protocol","port","match","axios","defaults","baseURL","interceptors","request","use","config","process","env","NODE_ENV","_config$method","console","log","method","toUpperCase","url","error","Promise","reject","response","status","localStorage","removeItem","headers","common","reload"],"sources":["C:/Users/anzip/OneDrive/Documentos/Pjarvis/Code/frontend/src/config/api.js"],"sourcesContent":["// Configuraci贸n de API que detecta autom谩ticamente el entorno\r\nconst getApiBaseUrl = () => {\r\n  // Si estamos en el navegador\r\n  if (typeof window !== 'undefined') {\r\n    const hostname = window.location.hostname;\r\n    const protocol = window.location.protocol;\r\n    const port = '5000'; // Puerto del backend\r\n    \r\n    // Si accedemos desde localhost, usar localhost para el backend\r\n    if (hostname === 'localhost' || hostname === '127.0.0.1') {\r\n      return `${protocol}//localhost:${port}`;\r\n    }\r\n    \r\n    // Si accedemos desde IP local, usar la misma IP para el backend\r\n    if (hostname.match(/^192\\.168\\.|^10\\.|^172\\./)) {\r\n      return `${protocol}//${hostname}:${port}`;\r\n    }\r\n    \r\n    // Fallback a localhost\r\n    return `${protocol}//localhost:${port}`;\r\n  }\r\n  \r\n  // Fallback para desarrollo\r\n  return 'https://localhost:5000';\r\n};\r\n\r\n// Configuraci贸n de axios\r\nimport axios from 'axios';\r\n\r\n// Configurar la URL base de la API\r\naxios.defaults.baseURL = getApiBaseUrl();\r\n\r\n// Interceptor para manejar errores de conexi贸n\r\naxios.interceptors.request.use(\r\n  config => {\r\n    // Log de la URL que se est谩 usando (solo en desarrollo)\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log(` API Request: ${config.method?.toUpperCase()} ${config.baseURL}${config.url}`);\r\n    }\r\n    return config;\r\n  },\r\n  error => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Interceptor para manejar 401 (token inv谩lido o expirado)\r\naxios.interceptors.response.use(\r\n  response => response,\r\n  error => {\r\n    if (error.response && error.response.status === 401) {\r\n      localStorage.removeItem('authToken');\r\n      localStorage.removeItem('userData');\r\n      delete axios.defaults.headers.common['Authorization'];\r\n      // Opcional: puedes mostrar un mensaje o redirigir al login\r\n      window.location.reload(); // Recarga la app para forzar login\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default axios; "],"mappings":"AAAA;AACA,MAAMA,aAAa,GAAGA,CAAA,KAAM;EAC1B;EACA,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;IACjC,MAAMC,QAAQ,GAAGD,MAAM,CAACE,QAAQ,CAACD,QAAQ;IACzC,MAAME,QAAQ,GAAGH,MAAM,CAACE,QAAQ,CAACC,QAAQ;IACzC,MAAMC,IAAI,GAAG,MAAM,CAAC,CAAC;;IAErB;IACA,IAAIH,QAAQ,KAAK,WAAW,IAAIA,QAAQ,KAAK,WAAW,EAAE;MACxD,OAAO,GAAGE,QAAQ,eAAeC,IAAI,EAAE;IACzC;;IAEA;IACA,IAAIH,QAAQ,CAACI,KAAK,CAAC,0BAA0B,CAAC,EAAE;MAC9C,OAAO,GAAGF,QAAQ,KAAKF,QAAQ,IAAIG,IAAI,EAAE;IAC3C;;IAEA;IACA,OAAO,GAAGD,QAAQ,eAAeC,IAAI,EAAE;EACzC;;EAEA;EACA,OAAO,wBAAwB;AACjC,CAAC;;AAED;AACA,OAAOE,KAAK,MAAM,OAAO;;AAEzB;AACAA,KAAK,CAACC,QAAQ,CAACC,OAAO,GAAGT,aAAa,CAAC,CAAC;;AAExC;AACAO,KAAK,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAC5BC,MAAM,IAAI;EACR;EACA,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,EAAE;IAAA,IAAAC,cAAA;IAC1CC,OAAO,CAACC,GAAG,CAAC,oBAAAF,cAAA,GAAmBJ,MAAM,CAACO,MAAM,cAAAH,cAAA,uBAAbA,cAAA,CAAeI,WAAW,CAAC,CAAC,IAAIR,MAAM,CAACJ,OAAO,GAAGI,MAAM,CAACS,GAAG,EAAE,CAAC;EAC/F;EACA,OAAOT,MAAM;AACf,CAAC,EACDU,KAAK,IAAI;EACP,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAhB,KAAK,CAACG,YAAY,CAACgB,QAAQ,CAACd,GAAG,CAC7Bc,QAAQ,IAAIA,QAAQ,EACpBH,KAAK,IAAI;EACP,IAAIA,KAAK,CAACG,QAAQ,IAAIH,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IACnDC,YAAY,CAACC,UAAU,CAAC,WAAW,CAAC;IACpCD,YAAY,CAACC,UAAU,CAAC,UAAU,CAAC;IACnC,OAAOtB,KAAK,CAACC,QAAQ,CAACsB,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;IACrD;IACA9B,MAAM,CAACE,QAAQ,CAAC6B,MAAM,CAAC,CAAC,CAAC,CAAC;EAC5B;EACA,OAAOR,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAehB,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}